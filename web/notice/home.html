<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>çœ‹è¨ºæé†’ğŸ’Œ(runoob.com)</title>
<link rel="manifest" href="manifest.json">	
<link href="static/img/icon_192.png" rel="shortcut icon">

<link rel="Bookmark" href="static/img/favicon.ico"/>
    
<link rel="icon" sizes="192x192" href="static/img/icon_192.png">
<link rel="icon" sizes="128x128" href="static/img/icon_128.png">
<link rel="apple-touch-icon" sizes="128x128" href="static/img/icon_128.png">
<link rel="apple-touch-icon-precomposed" sizes="128x128" href="static/img/icon_128.png">

</head>
    <script>
    // æ”¯æ´serviceWorkeræ‰å­˜å…¥sw.jsæª”
    if('serviceWorker' in navigator) {
      
      // window loadå¾Œæ‰åŸ·è¡Œï¼Œä»¥å…å¢åŠ é é¢è®€å–çš„æ™‚é–“
      window.addEventListener('load', function() {
        
        // å»ºç«‹sw.js
        navigator.serviceWorker.register('https://hosp-nckm.github.io/web/notice/sw.js')
          .then(function(reg) {
            console.log(reg.scope); // çœ‹é€™æ”¯sw.jsåŸ·è¡Œçš„ç¯„åœ
          })
          // è¨»å†Šå¤±æ•—
          .catch(function(err) {
            console.log('error: ', err);
          });
       
        // é™„ä¸Šåˆªé™¤sw.jsçš„å¯«æ³•
        /*navigator.serviceWorker.getRegistrations().then(function(reg) {
          for(var reg of reg) {
            reg.unregister()
          }
        });*/
        
      });
    }
  </script>
<!--script>
this.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request).then(function (response) {
		  return response;
    })
  );
}); 
</script-->
<script>
    self.addEventListener('fetch', event => {
	const dataUrl = 'https://hosp-nckm.github.io/web/notice/';
	event.respondWith(
		caches.match(event.request).then(function (response) {
			return response || fetch(event.request).then(res =>
				// å­˜ caches ä¹‹å‰ï¼Œè¦å…ˆæ‰“é–‹ caches.open(dataCacheName)
				caches.open(dataCacheName)
				.then(function(cache) {
					// cache.put(key, value)
					// ä¸‹ä¸€æ¬¡ caches.match æœƒå°æ‡‰åˆ° event.request
					cache.put(event.request, res.clone());
					return res;
				})
			);
		})
	);
}); 
</script>
<body>
    <h1>çœ‹è¨ºæé†’</h1>
    <p>çœ‹è¨ºæé†’é€šçŸ¥</p>
  
</body>
</html>
