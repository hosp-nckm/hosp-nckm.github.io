<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <META NAME="Author" CONTENT="ARTER">
  <meta charset="utf-8" />
  <title>粉紅旅程_影片</title>
  <link href="/web/PWA_learn/static/img/icon_192.png" rel="shortcut icon">
  <link rel="manifest" href="/web/PWA_learn/manifest.json">
  <!-- CSS 樣式 -->
  <style type="text/css">

  </style>

  <!-- JavaScript -->
    <!--script>
      
      /* 判断当前浏览器是否支持serviceWorker */
    if ('serviceWorker' in navigator) {
        /* 当页面加载完成就创建一个serviceWorker */
        window.addEventListener('load', function () {
            /* 创建并指定对应的执行内容 */
            /* scope 参数是可选的，可以用来指定你想让 service worker 控制的内容的子目录。 在这个例子里，我们指定了 '/'，表示 根网域下的所有内容。这也是默认值。 */
            navigator.serviceWorker.register('/web/PWA_learn/serviceWorker.js', {scope: '/'})
                .then(function (registration) {
 
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                })
                .catch(function (err) {
 
                    console.log('ServiceWorker registration failed: ', err);
                });
        });
    }
      /*
        // 進行 service-wroker 註冊
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker
                    .register('/web/PWA_learn/service-wroker.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }*/
      </script>
    <script>
      if('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/web/PWA_learn/serviceWorker.js');
}
    </script-->
  <script>
        // 支援serviceWorker才存入sw.js檔
    if('serviceWorker' in navigator) {
      
      console.log("will service worker register?")
      // window load後才執行，以免增加頁面讀取的時間
      window.addEventListener('load', function() {
        
        // 建立sw.js
        navigator.serviceWorker.register('/web/PWA_learn/sw_home.js')
          .then(function(reg) {
            console.log(reg.scope); // 看這支sw.js執行的範圍
          })
          // 註冊失敗
          .catch(function(err) {
            console.log('error: ', err);
          });
       
        // 附上刪除sw.js的寫法
        /*navigator.serviceWorker.getRegistrations().then(function(reg) {
          for(var reg of reg) {
            reg.unregister()
          }
        });*/
        
      });
    }

  </script>
  <script>
    // Detect iOS and if it is, add the crossorigin to the video player so that it is working as expected
  if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Mac') != -1 && navigator.userAgent.indexOf('Chrome') == -1){
    document.getElementById("video_1s").setAttribute("crossorigin", "true");
    document.getElementById("video_2s").setAttribute("crossorigin", "true");
};
  </script>
</head>
<body>
  <h2>PWA 測試</h2>
  <p>step 4 manifest.json favicon.ico  v2</p>
  <!-- 網頁內文 -->
  <img src="static/img/dog.jpg" title="dog">
  <img src="static/img/cat.jpg" title="cat">
  <video preload="auto"  id="video_1s" style='border-style:inset;' width="100%" height="540" controls=""><source src="static/video/乳房重建 台語版.mp4" type="video/mp4"></video>
<video preload="auto"  id="video_1s" style='border-style:inset;' width="100%" height="540" controls=""><source src="static/video/乳房重建衛教影片 國語版 實驗組 最新版_1.mp4" type="video/mp4"></video>
</body>
</html>
