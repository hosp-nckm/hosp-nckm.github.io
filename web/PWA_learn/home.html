<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <META NAME="Author" CONTENT="ARTER">
  <meta charset="utf-8" />
  <title>PWA 測試</title>
  <link href="/web/PWA_learn/static/img/icon.png" rel="shortcut icon">
  <link rel="manifest" href="/web/PWA_learn/manifest.json">
  <!-- CSS 樣式 -->
  <style type="text/css">

  </style>

  <!-- JavaScript -->
    <script>
      
      /* 判断当前浏览器是否支持serviceWorker */
    if ('serviceWorker' in navigator) {
        /* 当页面加载完成就创建一个serviceWorker */
        window.addEventListener('load', function () {
            /* 创建并指定对应的执行内容 */
            /* scope 参数是可选的，可以用来指定你想让 service worker 控制的内容的子目录。 在这个例子里，我们指定了 '/'，表示 根网域下的所有内容。这也是默认值。 */
            navigator.serviceWorker.register('/web/PWA_learn/serviceWorker.js', {scope: '/'})
                .then(function (registration) {
 
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                })
                .catch(function (err) {
 
                    console.log('ServiceWorker registration failed: ', err);
                });
        });
    }
      /*
        // 進行 service-wroker 註冊
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker
                    .register('/web/PWA_learn/service-wroker.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }*/
      </script>
  <!--script>
        // 支援serviceWorker才存入sw.js檔
    if('serviceWorker' in navigator) {
      
      console.log("will service worker register?")
      // window load後才執行，以免增加頁面讀取的時間
      window.addEventListener('load', function() {
        
        // 建立sw.js
        navigator.serviceWorker.register('/web/PWA_learn/sw_home.js')
          .then(function(reg) {
            console.log(reg.scope); // 看這支sw.js執行的範圍
          })
          // 註冊失敗
          .catch(function(err) {
            console.log('error: ', err);
          });
       
        // 附上刪除sw.js的寫法
        /*navigator.serviceWorker.getRegistrations().then(function(reg) {
          for(var reg of reg) {
            reg.unregister()
          }
        });*/
        
      });
    }

  </script-->
</head>
<body>
  <h2>PWA 測試</h2>
  <p>step 4 manifest.json favicon.ico</p>
  <!-- 網頁內文 -->
  <img src="static/img/dog.jpg" title="dog">
  <img src="static/img/cat.jpg" title="cat">

</body>
</html>
